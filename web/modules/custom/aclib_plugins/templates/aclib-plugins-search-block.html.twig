{# @see http://twig.sensiolabs.org/doc/tags/macro.html #}
{% import _self as searchTabs %}

{#
  Define search input and icon/button block
  Share the same between all tabs, what changes is only redirect URL set in tab.action property
#} 
{% macro tabContent(tab) %}
  {% spaceless %}
    <div class="aclib-plugins search-form container d-flex align-items-baseline align-content-between px-0">
      
      {{ tab.search_input }}
      
      {# If we have Bootstrap icon fonts we can set Icon/Button property on block configuration #}
      {% if button %}
        {% set button_class = 'bi-' ~ button %}
          <i {{ create_attribute({'class': ['display-6', 'bi', button_class]}) }}></i>
      {# Else we define markup, form-submit class in particular to assign existing bootstrap class for search icon #}
      {% else %}
        <a href="{{ tab.action }}" class="form-submit px-3"> </a>
      {% endif %}
    </div>
  {% endspaceless %}
{% endmacro %}

{# Bootstrap tabs #}
{% spaceless %}
  {% if tabs is not empty %}
    <ul class="aclib-plugins nav nav-tabs" id="search-tabs" role="tablist">
      {% for tab in tabs %}
        {% set active = loop.index == 1 ? 'active' : '' %}
        <li class="nav-item" role="presentation">
           <button class="nav-link text-info {{ active }}" data-bs-toggle="tab" data-bs-target="#{{ tab.id }}" type="button" role="tab" aria-controls="{{ tab.id }}" aria-selected="true">{{ tab.label }}</button>
       </li>
      {% endfor %}
    </ul>
    
    <div class="aclib-plugins tab-content" id="search-tabs-content">
      {% for tab in tabs %}
   
        {# Here we use our macro function #}
        {% set tab_content = searchTabs.tabContent(tab, search_input) %}
   
        {% set active = loop.index == 1 ? 'active' : '' %}
        <div class="tab-pane fade show {{ active }}" id="{{ tab.id }}" role="tabpanel" aria-labelledby="{{ tab.id }}-tab">{{ tab_content }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endspaceless %}